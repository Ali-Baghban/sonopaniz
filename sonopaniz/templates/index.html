<html>
    <title>Sonopaniz</title>
    <body>
        <script src='https://www.google.com/recaptcha/api.js?render={{recaptcha_site_key}}'></script>
        <script>
            //global grecaptcha
            grecaptcha.ready(function() {
              grecaptcha.execute('{{recaptcha_site_key}}', {action: "/contact/"}).then(function(token) {
                document.getElementById('g-recaptcha-response').value = token;
              });
            });
          </script>
        <h1>Hello, I'm Ali Baghban</h1><hr>
        <form action="" method="POST">
            {% csrf_token %}
            {{ form.tarcking }}
            <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response"> 
        </form>
        <h1 id="trackingresult">{{ tracking_result }}</h1>
        <script>document.getElementById("trackingresult").innerHTML("Hello")</script>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("#tracking").change(function(e){
                e.preventDefault()
                var data = $("#tracking").val();
                $.ajax({
                    url : "{% url 'TrackingAjax' %}",
                    data : {
                        'data':data,
                        'csrfmiddlewaretoken': '{{ csrf_token }}',
                            },
                    type: 'post',
                    success:function(result){
                        $("#trackingresult").append(result.data);
                        console.log(result.key);
                    }

                });
            });
        });
    </script>
</html>